## What:
>将对象组合成树形结构以表示“部分整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。

组合模式又称为部分整体模式，该模式将对象组合成树形结构以表示"部分-整体"的层次结构。

## Why:
优点：
1、高层模块调用简单；
2、节点自由增加。

缺点：
1.在使用组合模式时，其叶子和树枝的声明都是实现类，而不是接口，违反了依赖倒置原则；
2.要求较高的抽象性，如果节点和叶子有很多差异性的话，比如很多方法和属性都不一样，难以实现组合模式。
## Where:
1.在具有整体和部分的层次结构中，希望通过一种方式忽略整体与部分的差异，客户端可以一致地对待它们。
2.在一个系统中能够分离出叶子对象和容器对象，而且它们的类型不固定，需要增加一些新的类型。
3.需要遍历组织机构，或者处理的对象具有树形结构时使用。如树形菜单，文件、文件夹的管理。

## How:

组合模式有以下几个概念：

**Component**：它是一个抽象角色，为要组合的对象提供统一的接口。

**Leaf**：在组合中表示子节点对象，叶子节点不能有子节点。

**Composite**：定义有枝节点的行为，用来存储部件，实现在Component接口中的有关操作。

举个栗子：一间公司除了有多个部门，还有多个子公司，现在需要遍历公司名字和公司部门名字，这个结构符合树形结构，所以可以使用组合模式。
![Pattern-Composite](https://raw.githubusercontent.com/MuggleLee/PicGo/master/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/Pattern-Composite.png)

为使程序简单，代码中只有添加、获取分公司名字和部门名字的方法。


Component类：
```java
public abstract class Component {

    //添加

    void addCompanyName(String companyName) {
        throw new UnsupportedOperationException("不支持添加操作");
    }

    void addDepartmentName(String departmentName) { throw new UnsupportedOperationException("不支持添加部门操作"); }

    void addSubCompany(Company company) { throw new UnsupportedOperationException("不支持添加操作"); }

    void addDepartment(Department department) {
        throw new UnsupportedOperationException("不支持添加部门操作");
    }


    //获取

    String getCompanyName() { throw new UnsupportedOperationException("不支持获取操作"); }

    List<String> getAllDepartmentName() { throw new UnsupportedOperationException("不支持获取部门操作"); }

    Department getDepartment() {
        throw new UnsupportedOperationException("不支持获取部门操作");
    }

    void printCompany() {
        throw new UnsupportedOperationException("不支持获取操作");
    }

}
```





输出结果：
```java
香港总公司
    物流部
    人事部
    财务部
    北京分公司
        销售部
        人事部
        财务部
    广州分公司
        IT部
        技术部
        人事部
        财务部
```


# 总结


参考资料：

[https://www.cnblogs.com/lfxiao/p/6816026.html](https://www.cnblogs.com/lfxiao/p/6816026.html)